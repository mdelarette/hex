<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>HEX</title>
	
	<!-- https://stackoverflow.com/questions/1664785/resize-html5-canvas-to-fit-window -->
	<style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
			overflow: hidden; /*  Disable scrollbars */
			display: block;  /* No floating content on sides */
        }
    </style>
	
	
    <!-- <link rel="stylesheet" href="style.css"> -->
    <script src="tuile.js"></script>
    <script src="renderer.js"></script>
    <script src="deck.js"></script>	
    <script src="hammer.min.js"></script>
	
    <script src="main.ts"></script>
	
	
  </head>

<body id="root" style="margin:0px;">


<script>


<!-- var blueImage = new Image();		 -->
<!-- blueImage.src = './ocean.jpg'; -->
<!-- var brownImage = new Image();		 -->
<!-- brownImage.src = './herbe.jpg'; -->




// the window.onload event will fire when everything is loaded, including images etc.
window.onload = () => {
	
	// On windows, initiate heigth and width.  And size of "Tuile" 
	
	width = window.innerWidth - 8;
	height = window.innerHeight - 8;
	
	
	let root = document.getElementById("root");
	
	bg_canvas = document.createElement("canvas");
	bg_canvas.width = width;
	bg_canvas.height = height;
	bg_canvas.style = "border:1px solid #000000; position: absolute; z-index: 0";
	
	root.appendChild(bg_canvas);
	
	fg_canvas = document.createElement("canvas");
	fg_canvas.width = width;
	fg_canvas.height = height;
	fg_canvas.style = "border:1px solid #000000; position: absolute; z-index: 1";
	
	root.appendChild(fg_canvas);
	
	
	bgContext = bg_canvas.getContext("2d");
	fgContext = fg_canvas.getContext("2d");


	<!-- patterns.blue = bgContext.createPattern(blueImage, 'repeat'); -->
	<!-- patterns.brown = bgContext.createPattern(brownImage, 'repeat'); -->
	


	
	
	
	
	
	var hammertime = new Hammer(window, null);
	<!-- hammertime.get('pinch').set({ enable: true }); -->
	<!-- hammertime.get('rotate').set({ enable: true }); -->

	
	hammertime.on('pan', function(ev) {
		console.log('pan', ev);
	});
	
	hammertime.on('pinch', function(ev) {
		console.log('pinch', ev);
	});
	
	hammertime.on('press', function(ev) {
		console.log('press', ev);
	});
	
	hammertime.on('rotate', function(ev) {
		console.log('rotate', ev);
	});
	
	<!-- hammertime.on('swipe', function(ev) { -->
		<!-- console.log('swipe', ev); -->
	<!-- }); -->
	
	<!-- hammertime.on('tap', function(ev) { -->
		<!-- console.log('tap', ev); -->
	<!-- }); -->
	
	
	
	
	
	
	
	
};

	  
<!-- let x = 50; -->
<!-- let y = 50; -->
<!-- let colonne = 0; -->
<!-- for(var i = 0; i< tuiles.length; i++ ) -->
<!-- {	 -->
	<!-- let tuile = tuiles[i].tuile; -->
	
	<!-- <!-- console.log("Tuile i", i, tuile); --> -->
	
	<!-- console.log("Tuile x,y", x, y, colonne ); -->
	
	<!-- drawTuile(myContext, x, y, 25, tuile); -->
	
	<!-- colonne = (colonne + 1) % 13; -->
	<!-- x= x+50; -->
	<!-- if(colonne === 0) -->
	<!-- { -->
	<!-- x = 50; -->
		<!-- y= y+50; -->
	<!-- } -->

<!-- } -->





      <!-- // save canvas image as data url (png format by default) -->
      <!-- var dataURL = myCanvas.toDataURL(); -->

      <!-- // set canvasImg image src to dataURL -->
      <!-- // so it can be saved as an image -->
      <!-- document.getElementById('myCanvas').src = dataURL; -->


window.onresize = () => {

	width = window.innerWidth - 8;
	height = window.innerHeight - 8;
	
	size = computeSize(playFieldWithCoordinates, height);
	
	bg_canvas.width = width;
	bg_canvas.height = height
	
	fg_canvas.width = width;
	fg_canvas.height = height
	
	drawPlayFieldWithCoordinates(bgContext, playFieldWithCoordinates, size, patterns);
}


// Key listener
document.addEventListener('keyup', (e) => {	
	// Canceling last round
	if(e.key === 'z' && e.ctrlKey && playFieldWithCoordinates.length > 0)
	{		
		tuile = playFieldWithCoordinates.pop();
		delete tuile.coordinates;
		
		shuffledDeck = [tuile.id, ...shuffledDeck];
		
		bgContext.clearRect(0,0, width, height);
		fgContext.clearRect(0,0, width, height);
		
		size = computeSize(playFieldWithCoordinates, height);
		drawPlayFieldWithCoordinates(bgContext, playFieldWithCoordinates, size, patterns);
		drawTuile(fgContext, mousePos.x, mousePos.y, size, tuile, patterns );
	}

});
// Note, if more keys check, consider using Mouse trap :  https://github.com/ccampbell/mousetrap


</script>

</body>
</html>
