(this.webpackJsonphex=this.webpackJsonphex||[]).push([[0],{18:function(e){e.exports=JSON.parse('{"a":"hex","b":"0.1.5"}')},38:function(e,t,a){e.exports=a.p+"static/media/ocean.efe653a9.jpg"},39:function(e,t,a){e.exports=a.p+"static/media/herbe.b15578cb.jpg"},51:function(e,t,a){e.exports=a(62)},56:function(e,t,a){},57:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),l=(a(56),a(19)),c=a(11),s=a(4),u=(a(57),a(38)),h=a.n(u),d=a(39),f=a.n(d),m=a(92),g=a(101),v=a(94),E=a(96),b=a(99),y=a(100),W=a(98),p=a(97),w=a(41),x=a.n(w),T=a(42),O=a.n(T),j=a(43),q=a.n(j),S=a(44),z=a.n(S),P=a(45),C=a.n(P);function I(){var e="undefined"===typeof window,t=r.a.useState({windowInnerWidth:e?1200:window.innerWidth,windowInnerHeight:e?800:window.innerHeight}),a=Object(s.a)(t,2),n=a[0],i=a[1];return r.a.useEffect((function(){var e=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isImmediate:!1};return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var l=this,c=function(){t=void 0,n.isImmediate||e.apply(l,i)},s=n.isImmediate&&void 0===t;void 0!==t&&clearTimeout(t),t=setTimeout(c,a),s&&e.apply(l,i)}}((function(){i({windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight})}),250);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}var M={image:null,status:"loading"};function k(e,t){var a=r.a.useState(M),n=a[0].image,i=a[0].status,o=a[1];return r.a.useEffect((function(){if(e){var a=document.createElement("img");return a.addEventListener("load",n),a.addEventListener("error",r),t&&(a.crossOrigin=t),a.src=e,function(){a.removeEventListener("load",n),a.removeEventListener("error",r),o(M)}}function n(){o({image:a,status:"loaded"})}function r(){o({image:null,status:"failed"})}}),[e,t,o]),[n,i]}var B,N=a(18);!function(e){e[e.Water=0]="Water",e[e.Earth=1]="Earth",e[e.Forest=2]="Forest",e[e.Desert=3]="Desert"}(B||(B={}));var H=["#7dd1ff","#a65a35","green","yellow"],L=(B.Forest,B.Desert,{tiles:[{tile:{id:1,name:"Toute eau",center:B.Water},quantity:3},{tile:{id:2,center:B.Water,edges:[B.Earth,B.Water,B.Water,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:3,center:B.Water,edges:[B.Earth,B.Earth,B.Water,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:4,center:B.Water,edges:[B.Earth,B.Water,B.Earth,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:5,center:B.Water,edges:[B.Earth,B.Water,B.Water,B.Earth,B.Water,B.Water]},quantity:1},{tile:{id:6,center:B.Water,edges:[B.Earth,B.Earth,B.Earth,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:7,center:B.Water,edges:[B.Earth,B.Earth,B.Water,B.Earth,B.Water,B.Water]},quantity:1},{tile:{id:8,center:B.Water,edges:[B.Earth,B.Earth,B.Water,B.Water,B.Earth,B.Water]},quantity:1},{tile:{id:9,center:B.Water,edges:[B.Earth,B.Earth,B.Earth,B.Earth,B.Water,B.Water]},quantity:1},{tile:{id:10,center:B.Water,edges:[B.Earth,B.Earth,B.Earth,B.Water,B.Earth,B.Water]},quantity:1},{tile:{id:11,center:B.Water,edges:[B.Earth,B.Earth,B.Water,B.Earth,B.Earth,B.Water]},quantity:1},{tile:{id:12,center:B.Water,edges:[B.Earth,B.Earth,B.Earth,B.Earth,B.Earth,B.Water]},quantity:1},{tile:{id:13,center:B.Water,edges:[B.Earth,B.Earth,B.Earth,B.Earth,B.Earth,B.Earth]},quantity:1},{tile:{id:101,name:"Ilot central",center:B.Earth,edges:[B.Water,B.Water,B.Water,B.Water,B.Water,B.Water]},quantity:3},{tile:{id:102,center:B.Earth,edges:[B.Earth,B.Water,B.Water,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:103,center:B.Earth,edges:[B.Earth,B.Earth,B.Water,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:104,center:B.Earth,edges:[B.Earth,B.Water,B.Earth,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:105,center:B.Earth,edges:[B.Earth,B.Water,B.Water,B.Earth,B.Water,B.Water]},quantity:1},{tile:{id:106,center:B.Earth,edges:[B.Earth,B.Earth,B.Earth,B.Water,B.Water,B.Water]},quantity:1},{tile:{id:107,center:B.Earth,edges:[B.Earth,B.Earth,B.Water,B.Earth,B.Water,B.Water]},quantity:1},{tile:{id:108,center:B.Earth,edges:[B.Earth,B.Earth,B.Water,B.Water,B.Earth,B.Water]},quantity:1},{tile:{id:109,center:B.Earth,edges:[B.Earth,B.Earth,B.Earth,B.Earth,B.Water,B.Water]},quantity:1},{tile:{id:110,center:B.Earth,edges:[B.Earth,B.Earth,B.Earth,B.Water,B.Earth,B.Water]},quantity:1},{tile:{id:111,center:B.Earth,edges:[B.Earth,B.Earth,B.Water,B.Earth,B.Earth,B.Water]},quantity:1},{tile:{id:112,center:B.Earth,edges:[B.Earth,B.Earth,B.Earth,B.Earth,B.Earth,B.Water]},quantity:1},{tile:{id:113,name:"Toute terre",center:B.Earth},quantity:1}]}),A=a(12);function J(e,t){if(e.length>t)e.unshift.apply(e,Object(A.a)(e.splice(-t)));else for(var a=0;a<t;)e.unshift(e.splice(-1)),a++;return e}var U=Math.cos(Math.PI/6),D=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}];function R(e,t,a,n,r){if(n)if(n.edges){var i=a/3,o=t.x,l=t.y,c=a;e.beginPath(),e.moveTo(o-c*U,l-.5*c),e.lineTo(o-c*U,l+.5*c),e.lineTo(o-i*U,l+.5*i),e.lineTo(o-i*U,l-.5*i),e.closePath(),e.fillStyle=r?r[n.edges[0]]:"red",e.fill(),e.beginPath(),e.moveTo(o-c*U,l+.5*c),e.lineTo(o,l+c),e.lineTo(o,l+i),e.lineTo(o-i*U,l+.5*i),e.closePath(),e.fillStyle=r?r[n.edges[1]]:"red",e.fill(),e.beginPath(),e.moveTo(o,l+c),e.lineTo(o+c*U,l+.5*c),e.lineTo(o+i*U,l+.5*i),e.lineTo(o,l+i),e.closePath(),e.fillStyle=r?r[n.edges[2]]:"red",e.fill(),e.beginPath(),e.moveTo(o+c*U,l+.5*c),e.lineTo(o+c*U,l-.5*c),e.lineTo(o+i*U,l-.5*i),e.lineTo(o+i*U,l+.5*i),e.closePath(),e.fillStyle=r?r[n.edges[3]]:"red",e.fill(),e.beginPath(),e.moveTo(o+c*U,l-.5*c),e.lineTo(o,l-c),e.lineTo(o,l-i),e.lineTo(o+i*U,l-.5*i),e.closePath(),e.fillStyle=r?r[n.edges[4]]:"red",e.fill(),e.beginPath(),e.lineTo(o,l-c),e.lineTo(o-c*U,l-.5*c),e.lineTo(o-i*U,l-.5*i),e.lineTo(o,l-i),e.closePath(),e.fillStyle=r?r[n.edges[5]]:"red",e.fill(),e.beginPath(),e.moveTo(o-i*U,l-.5*i),e.lineTo(o-i*U,l+.5*i),e.lineTo(o,l+i),e.lineTo(o+i*U,l+.5*i),e.lineTo(o+i*U,l-.5*i),e.lineTo(o,l-i),e.lineTo(o-i*U,l-.5*i),e.closePath(),e.fillStyle=r?r[n.center]:"red",e.fill()}else X(e,t,a,r?r[n.center]:"red");else X(e,t,a,"red")}function V(e,t,a,n,r){!function(e,t,a){var n=t.x,r=t.y,i=a;e.beginPath(),e.moveTo(n-i*U,r-.5*i),e.lineTo(n-i*U,r+.5*i),e.lineTo(n,r+i),e.lineTo(n+i*U,r+.5*i),e.lineTo(n+i*U,r-.5*i),e.lineTo(n,r-i),e.lineTo(n-i*U,r-.5*i),e.closePath(),e.shadowBlur=20,e.shadowColor="black",e.strokeStyle="black",e.stroke(),e.fillStyle="",e.fill(),e.shadowBlur=0}(e,t,a),R(e,t,a,n,r)}function _(e,t,a){var n=t.x,r=t.y,i=a;e.beginPath(),e.moveTo(n-i*U,r-.5*i),e.lineTo(n-i*U,r+.5*i),e.lineTo(n,r+i),e.lineTo(n+i*U,r+.5*i),e.lineTo(n+i*U,r-.5*i),e.lineTo(n,r-i),e.lineTo(n-i*U,r-.5*i),e.closePath(),e.strokeStyle="black",e.stroke()}function X(e,t,a,n){var r=t.x,i=t.y,o=a;e.beginPath(),e.moveTo(r-o*U,i-.5*o),e.lineTo(r-o*U,i+.5*o),e.lineTo(r,i+o),e.lineTo(r+o*U,i+.5*o),e.lineTo(r+o*U,i-.5*o),e.lineTo(r,i-o),e.lineTo(r-o*U,i-.5*o),e.closePath(),e.fillStyle=n,e.fill()}function F(e,t){return{x:t*(Math.sqrt(3)*e.coordinates.q+Math.sqrt(3)/2*e.coordinates.r),y:t*(1.5*e.coordinates.r)}}function K(e,t){return{x:t*(Math.sqrt(3)*e.q+Math.sqrt(3)/2*e.r),y:t*(1.5*e.r)}}function G(e,t,a){var n={x:e.width/2,y:e.height/2};if(t.length>0){for(var r={min:Number.MAX_VALUE,max:Number.MIN_VALUE},i={min:Number.MAX_VALUE,max:Number.MIN_VALUE},o=0;o<t.length;o++){var l=K(t[o],a);r.min=Math.min(l.x,r.min),r.max=Math.max(l.x,r.max),i.min=Math.min(l.y,i.min),i.max=Math.max(l.y,i.max)}n.x=n.x-(r.max+r.min)/2,n.y=n.y-(i.max+i.min)/2}return n}function Y(e,t){var a={min:0,max:0},n=2+1.5*((a=e.tiles.reduce((function(e,t){return{min:Math.min(e.min,t.coordinates.r),max:Math.max(e.max,t.coordinates.r)}}),a)).max+-a.min+1+2-1),r=Math.floor(t.height/n),i=t.width/6/U;if(i=Math.floor(i),e.tiles.length>0){for(var o={min:Number.MAX_VALUE,max:Number.MIN_VALUE},l=0;l<e.tiles.length;l++){var c=F(e.tiles[l],10);o.min=Math.min(c.x,o.min),o.max=Math.max(c.x,o.max)}var s=(o.max-o.min+20*U)/(20*U)+2;i=t.width/(2*s)/U,i=Math.floor(i)}return Math.min(r,i)}var Z=function(e){var t=e.size,a=e.defaultPatterns,i=e.playfield,o=e.tileSize,l=e.images,u=Object(n.useState)(null),h=Object(s.a)(u,2),d=h[0],f=h[1],m=Object(n.useState)(a),g=Object(s.a)(m,2),v=g[0],E=g[1];return Object(n.useEffect)((function(){var e=document.getElementById("background").getContext("2d");f(e)}),[]),Object(n.useEffect)((function(){if(d){var e=Object(c.a)(v),t=l[B.Earth];if(t){var a=d.createPattern(t,"repeat");a&&(e[B.Earth]=a)}var n=l[B.Water];if(n){var r=d.createPattern(n,"repeat");r&&(e[B.Water]=r)}E(e)}}),[l]),Object(n.useEffect)((function(){i&&d&&(d.clearRect(0,0,t.width,t.height),function(e,t,a,n){for(var r=G({width:e.canvas.width,height:e.canvas.height},t.tiles.map((function(e){return e.coordinates})),a),i=0;i<t.tiles.length;i++){var o=t.tiles[i],l=F(o,a);R(e,{x:r.x+l.x,y:r.y+l.y},a,o,n)}}(d,i,o,v))}),[i,d,t,o,v]),r.a.createElement("canvas",{id:"background",width:t.width,height:t.height,style:{border:"1px solid #000000",position:"absolute",zIndex:0}})},$=function(e){var t=e.size,a=e.nextTile,i=e.defaultPatterns,o=e.onClick,l=e.onWheel,u=e.tileSize,h=e.images,d=Object(n.useState)({x:0,y:0}),f=Object(s.a)(d,2),m=f[0],g=f[1],v=Object(n.useState)(null),E=Object(s.a)(v,2),b=E[0],y=E[1],W=Object(n.useState)(i),p=Object(s.a)(W,2),w=p[0],x=p[1];Object(n.useEffect)((function(){var e=document.getElementById("foreground").getContext("2d");y(e)}),[]),Object(n.useEffect)((function(){if(b){var e=Object(c.a)(w),t=h[B.Earth];if(t){var a=b.createPattern(t,"repeat");a&&(e[B.Earth]=a)}var n=h[B.Water];if(n){var r=b.createPattern(n,"repeat");r&&(e[B.Water]=r)}x(e)}}),[h]),Object(n.useEffect)((function(){b&&m.x&&m.y&&(b.clearRect(0,0,t.width,t.height),a&&V(b,m,u,a,w))}),[m,t,b,a,w,u]);return r.a.createElement("canvas",{id:"foreground",width:t.width,height:t.height,style:{border:"1px solid #000000",position:"absolute",zIndex:3},onMouseMove:function(e){e.preventDefault(),e.persist();var t={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};g(t)},onWheel:function(e){e.preventDefault(),e.persist(),l&&l(e.nativeEvent.deltaY)},onClick:function(e){e.preventDefault(),e.persist();var t={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};g(t),o&&o(t)}})},Q=function(e){var t=e.size,a=e.messages,i=Object(n.useState)(null),o=Object(s.a)(i,2),l=o[0],c=o[1];return Object(n.useEffect)((function(){var e=document.getElementById("messages").getContext("2d");e&&(e.font="24px Parisienne"),c(e)}),[]),Object(n.useEffect)((function(){if(a&&l){a.get("name");var e=a.get("remainingTiles");if(l.clearRect(0,0,t.width,t.height),e){var n=l.measureText(e);l.fillText(e,t.width-n.width,30)}}}),[a,l,t]),r.a.createElement("canvas",{id:"messages",width:t.width,height:t.height,style:{border:"1px solid #000000",position:"absolute",zIndex:1}})},ee=function(e){var t=e.size,a=e.playfield,i=e.tileSize,o=e.nextTile,l=e.defaultPatterns,u=e.images,h=Object(n.useState)(null),d=Object(s.a)(h,2),f=d[0],m=d[1],g=Object(n.useState)(l||null),v=Object(s.a)(g,2),E=v[0],b=v[1];return Object(n.useEffect)((function(){var e=document.getElementById("touchHelper").getContext("2d");m(e)}),[]),Object(n.useEffect)((function(){if(f&&E&&u){var e=Object(c.a)(E),t=u[B.Earth];if(t){var a=f.createPattern(t,"repeat");a&&(e[B.Earth]=a)}var n=u[B.Water];if(n){var r=f.createPattern(n,"repeat");r&&(e[B.Water]=r)}b(e)}}),[u]),Object(n.useEffect)((function(){if(a&&f){var e=[{q:0,r:0}];a.tiles.length>0&&(e=[],a.tiles.forEach((function(t){D.forEach((function(n){var r={q:t.coordinates.q+n.q,r:t.coordinates.r+n.r};e.find((function(e){return e.q===r.q&&e.r===r.r}))||(a.tiles.find((function(e){return e.coordinates.q===r.q&&e.coordinates.r===r.r}))||e.push(r))}))}))),f&&(f.clearRect(0,0,t.width,t.height),o&&function(e,t,a,n,r){for(var i=G({width:e.canvas.width,height:e.canvas.height},t,a),o=0;o<t.length;o++){var l=t[o],c=K(l,a);if(_(e,{x:i.x+c.x,y:i.y+c.y},a),n&&!n.hasOwnProperty("coordinates")&&V(e,{x:i.x+c.x,y:i.y+c.y},.75*a,n,r),n&&n.hasOwnProperty("coordinates")){var s=n.coordinates;s.q===l.q&&s.r===l.r&&V(e,{x:i.x+c.x,y:i.y+c.y},a,n,r)}}}(f,e,i,o,E))}}),[a,f,t,i,o,E]),r.a.createElement("canvas",{id:"touchHelper",width:t.width,height:t.height,style:{border:"1px solid #000000",position:"absolute",zIndex:2}})},te=function(e){var t=e.size,a=e.nextTile,i=e.patterns,o=e.tileSize,l=Object(n.useState)(null),c=Object(s.a)(l,2),u=c[0],h=c[1];return Object(n.useEffect)((function(){var e=document.getElementById("nextTile").getContext("2d");h(e)}),[]),Object(n.useEffect)((function(){u&&(u.clearRect(0,0,t.width,t.height),a&&(R(u,{x:t.width/2,y:t.height/2},o,a,i),function(e,t,a,n){e.save(),e.translate(t.x-a/2,t.y-a/2),e.scale(a/100,a/100),e.fillStyle=n,e.strokeStyle="black",e.lineWidth=2,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,e.beginPath(),e.moveTo(99.992,43.019),e.bezierCurveTo(100.57,29.262,67.638,22.564,66.211,20.996),e.bezierCurveTo(65.5,20.216,67.861,-.015,50,0),e.bezierCurveTo(32.139,-.015,34.499,20.216,33.788,20.996),e.bezierCurveTo(32.361,22.564,-.569,29.262,.008,43.019),e.bezierCurveTo(.584,56.777,18.059,49.711,21.786,53.76),e.bezierCurveTo(25.046,57.304,6.507,79.989,4.433,94.394),e.bezierCurveTo(3.757,99.089,5.077,100,9.64,100),e.bezierCurveTo(17.916,100,25.817,99.995,33.093,99.995),e.bezierCurveTo(36.38,99.995,37.549,98.106,39.245,95.503),e.bezierCurveTo(42.999,89.741,47.533,80.479,50,80.48),e.bezierCurveTo(52.466,80.479,57.001,89.741,60.755,95.502),e.bezierCurveTo(62.451,98.106,63.619,99.994,66.906,99.994),e.bezierCurveTo(74.181,99.994,82.083,99.999,90.359,99.999),e.bezierCurveTo(94.922,99.999,96.243,99.088,95.566,94.393),e.bezierCurveTo(93.493,79.988,74.955,57.303,78.213,53.7595),e.bezierCurveTo(81.94,49.711,99.417,56.777,99.992,43.019),e.closePath(),e.fill(),e.stroke(),e.restore()}(u,{x:t.width/2,y:t.height/2},o,"green")))}),[t,u,a,i,o]),r.a.createElement("canvas",{id:"nextTile",width:t.width,height:t.height,style:{border:"1px solid #000000",position:"absolute",zIndex:0}})},ae=Object(m.a)((function(e){return Object(g.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{top:"auto",bottom:0,"& > div":{alignItems:"flex-start"}},grow:{flexGrow:1},canvasesContainer:{position:"absolute"}})})),ne=function(){var e=ae(),t=Object(n.useState)(navigator.maxTouchPoints>0),a=Object(s.a)(t,1)[0],i=r.a.useState(null),o=Object(s.a)(i,2),u=o[0],d=o[1],m=I(),g=m.windowInnerWidth,w=m.windowInnerHeight,T=Object(n.useState)({width:0,height:0}),j=Object(s.a)(T,2),S=j[0],P=j[1],M=Object(n.useState)(25),A=Object(s.a)(M,2),U=A[0],R=A[1],V=Object(n.useState)(null),_=Object(s.a)(V,2),X=_[0],F=_[1],K=Object(n.useState)([]),ne=Object(s.a)(K,2),re=ne[0],ie=ne[1],oe=Object(n.useState)({tiles:[]}),le=Object(s.a)(oe,2),ce=le[0],se=le[1],ue=Object(n.useState)(new Map),he=Object(s.a)(ue,2),de=he[0],fe=he[1],me=Object(n.useState)(H.map((function(e){return null}))),ge=Object(s.a)(me,2),ve=ge[0],Ee=ge[1],be=k(h.a),ye=Object(s.a)(be,2),We=ye[0],pe=ye[1],we=k(f.a),xe=Object(s.a)(we,2),Te=xe[0],Oe=xe[1];Object(n.useEffect)((function(){if("loaded"===pe&&!ve[B.Water]){var e=Object(c.a)(ve);e[B.Water]=We,Ee(e)}}),[We,pe,ve]),Object(n.useEffect)((function(){if("loaded"===Oe&&!ve[B.Earth]){var e=Object(c.a)(ve);e[B.Earth]=Te,Ee(e)}}),[Te,Oe,ve]),Object(n.useEffect)((function(){console.log("Window initial size",window.innerWidth,window.innerHeight);var e=window.innerWidth-2,t=window.innerHeight-2,a=document.getElementById("topBar");a&&(t-=a.scrollHeight);var n=document.getElementById("bottomBar");n&&(t-=n.scrollHeight),console.log("Canvas initial size",e,t),P({width:e,height:t});var r=Y({tiles:[]},{width:e,height:t}),i=localStorage.getItem("version");if(i&&N.b===JSON.parse(i)){var o=localStorage.getItem("playfield"),l=localStorage.getItem("remainingTiles");if(o&&l){var c=JSON.parse(o),s=JSON.parse(l);if(c&&s){console.log("restoring old game",o);var u=L.tiles.find((function(e){return e.tile.id===s[0]})),h=u?u.tile:null;F(h),se(c),ie(s);var d=Y(c,{width:e,height:t});return console.log("restoring old game newTileSize",d),void R(d)}}}else console.log("Not same version",N.b,i);qe(),R(r)}),[]),Object(n.useEffect)((function(){var e=g-2,t=w-2,a=document.getElementById("topBar");a&&(t-=a.scrollHeight);var n=document.getElementById("bottomBar");n&&(t-=n.scrollHeight),P({width:e,height:t})}),[g,w]),Object(n.useEffect)((function(){var e=Y(ce,S);R(e)}),[S,ce]);var je=function(){if(console.log("handleCtrlZ",ce.tiles.length),ce.tiles.length>0){var e=Object(l.a)({},ce,{tiles:Object(c.a)(ce.tiles)}),t=e.tiles.pop(),a=[t.id].concat(Object(c.a)(re));F(t),se(e),ie(a)}document.getElementById("audio").play()},qe=function(){var e=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}return e}(L.tiles.map((function(e){for(var t=[],a=0;a<e.quantity;a++)t.push(e.tile.id);return t})).flat()),t=L.tiles.find((function(t){return t.tile.id===e[0]})),a=t?t.tile:null;F(a),se({tiles:[]}),ie(e)};Object(n.useEffect)((function(){var e=new Map([["name","".concat(N.a," - ").concat(N.b)],["remainingTiles","".concat(re.length)]]);fe(e)}),[re.length]),Object(n.useEffect)((function(){localStorage.setItem("version",JSON.stringify(N.b)),localStorage.setItem("playfield",JSON.stringify(ce)),localStorage.setItem("remainingTiles",JSON.stringify(re))}),[ce,re]);var Se=function(){d(null)},ze=function(e){if(X&&X.edges){var t=Object(l.a)({},X,{edges:J(X.edges,e>0?-1:1)});F(t)}},Pe=function(e){ze(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.root,onKeyUp:function(e){e.preventDefault(),e.persist(),e.stopPropagation(),console.log("handleKeyUp event",e),console.log("handleKeyUp event",e.key);var t=new Map([["name","".concat(e.key)],["remainingTiles","".concat(re.length)]]);fe(t),"z"===e.key&&e.ctrlKey&&je(),"Backspace"===e.key&&je()},tabIndex:0},r.a.createElement(v.a,{id:"topBar",position:"static"},r.a.createElement(E.a,null,r.a.createElement(p.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(e){d(e.currentTarget)}},r.a.createElement(x.a,null)),r.a.createElement(W.a,{variant:"h6",className:e.title},"".concat(N.a," - ").concat(N.b)),a&&r.a.createElement(p.a,{edge:"end",className:e.menuButton,color:"inherit","aria-label":"touchApp"},r.a.createElement(O.a,null)," ",navigator.maxTouchPoints),!a&&r.a.createElement(p.a,{edge:"end",className:e.menuButton,color:"inherit","aria-label":"mouseApp"},r.a.createElement(q.a,null)))),r.a.createElement(b.a,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:Se},r.a.createElement(y.a,{onClick:function(){Se(),qe()}},"New game"),r.a.createElement(y.a,{onClick:function(){Se(),je()}},"Undo"),r.a.createElement(y.a,{onClick:function(){Se(),function(){for(var e=L.tiles.map((function(e){return e.tile})).flat(),t=S.height/S.width,a=1,n=a/(e.length/a);n<t;)n=++a/(e.length/a);for(var r=Math.ceil(e.length/a),i={tiles:[]},o=0,c=0,s=0;s<e.length;s++){var u=Object(l.a)({},e[s],{coordinates:{q:o,r:c}});((o+=2)+c/2)/2%r===0&&(o=-(c+=2)/2),i.tiles.push(u)}F(null),se(i),ie([])}()}},"Show tiles")),S.width&&S.height&&r.a.createElement("div",{id:"canvasesContainer",className:e.canvasesContainer},r.a.createElement(Z,{size:S,defaultPatterns:H,playfield:ce,tileSize:U,images:ve}),r.a.createElement(Q,{size:S,messages:de}),a&&r.a.createElement(ee,{size:S,playfield:ce,tileSize:U,nextTile:X,defaultPatterns:H,images:ve}),!a&&r.a.createElement(ee,{size:S,playfield:ce,tileSize:U,nextTile:null,defaultPatterns:null,images:null}),r.a.createElement($,{size:S,nextTile:a?null:X,defaultPatterns:H,onClick:function(e){if(X){var t={q:0,r:0};if(0!==ce.tiles.length){var n=G(S,ce.tiles.map((function(e){return e.coordinates})),U);t=function(e,t){var a=(Math.sqrt(3)/3*e.x-1/3*e.y)/t,n=2/3*e.y/t;return{q:Math.round(a),r:Math.round(n)}}({x:e.x-n.x,y:e.y-n.y},U)}if(void 0===ce.tiles.find((function(e){return e.coordinates.q===t.q&&e.coordinates.r===t.r}))){if(0!==ce.tiles.length){var r=0,i=!1,o=function(){var e=t.q+D[r].q,a=t.r+D[r].r;i=void 0!==ce.tiles.find((function(t){return t.coordinates.q===e&&t.coordinates.r===a})),r++};do{o()}while(!i&&r<D.length);if(!i)return}if(a){if(!X.hasOwnProperty("coordinates")){var s=Object(l.a)({},X,{coordinates:t});return void F(s)}var u=X.coordinates;if(u.q!==t.q||u.r!==t.r){var h=Object(l.a)({},X,{coordinates:t});return void F(h)}}var d=Object(l.a)({},ce,{tiles:[].concat(Object(c.a)(ce.tiles),[Object(l.a)({},X,{coordinates:t})])}),f=Object(c.a)(re);if(f.length>0){var m;f.shift();var g=null===(m=L.tiles.find((function(e){return e.tile.id===f[0]})))||void 0===m?void 0:m.tile;F(g||null)}else F(null);se(d),ie(f)}}},onWheel:ze,tileSize:U,images:ve})),a&&r.a.createElement(v.a,{id:"bottomBar",position:"fixed",color:"primary",className:e.appBar},r.a.createElement(E.a,null,r.a.createElement(p.a,{edge:"start",color:"inherit","aria-label":"rotate left",onClick:function(){Pe(-1)},disabled:!X},r.a.createElement(z.a,null)),r.a.createElement("div",{className:e.grow}),r.a.createElement("div",null,r.a.createElement(te,{size:{width:48,height:48},nextTile:X,patterns:H,tileSize:24})),r.a.createElement("div",{className:e.grow}),r.a.createElement(p.a,{edge:"end",color:"inherit","aria-label":"rotate right",onClick:function(){Pe(1)},disabled:!X},r.a.createElement(C.a,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.1cb14c50.chunk.js.map